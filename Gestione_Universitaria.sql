
CREATE TABLE autore (
    codice_fiscale character(16) PRIMARY KEY,
    nome character varying(50) NOT NULL,
    cognome character varying(50) NOT NULL,
    sesso character(7) NOT NULL,
    data_nascita date NOT NULL,
    libri_scritti smallint NOT NULL,
	check(sesso = 'Femmina' or sesso = 'Maschio'),
	check(libri_scritti > 1 and libri_scritti <= 2000)
);

CREATE TABLE bibliotecario (
    codice_fiscale character(16) PRIMARY KEY,
    nome character varying(50) NOT NULL,
    cognome character varying(50) NOT NULL,
    data_nascita date NOT NULL,
    sesso character(7) NOT NULL,
    stipendio smallint NOT NULL,
    data_inizio date NOT NULL,
	check(stipendio > 1000 and stipendio < 2000),
	check(sesso = 'Femmina' or sesso = 'Maschio')
);

CREATE TABLE casa_editrice (
    nome character varying(50) NOT NULL,
    via character varying(50) NOT NULL,
    numero_dipendenti smallint NOT NULL,
    numero_libri_stampati integer NOT NULL,
    data_fondazione date NOT NULL,
    partita_iva character(11) PRIMARY KEY,
	check(numero_dipendenti > 5 and numero_dipendenti < 500),
	check(numero_libri_stampati > 1)
);

-- i generi considerati nella base di dati,
-- sono quelli riportati all'interno della clausola check.
-- Per questo i generi specificati non sono da considerarsi come esaustivi.
CREATE TABLE libro (
    titolo character varying(100) PRIMARY KEY,
    numero_pagine smallint NOT NULL,
    numero_capitoli smallint NOT NULL,
    genere character varying(50) NOT NULL,
    eta_consigliata smallint NOT NULL,
    prezzo_unitario numeric(3,1) NOT NULL,
    numero_copie_disponibili smallint NOT NULL,
    incassi_totali integer NOT NULL,
    punteggio_medio numeric(2,1) NOT NULL,
    editrice character varying(50) NOT NULL,
    autore character(16) NOT NULL,
	FOREIGN KEY(editrice) REFERENCES casa_editrice(partita_iva),
    FOREIGN KEY(autore) REFERENCES autore(codice_fiscale),
	check(numero_pagine > 10 and numero_pagine < 900),
	check(numero_capitoli > 2 and numero_capitoli < 40),
	check(genere = 'fantasy' 
	or genere = 'rosa' 
	or genere = 'horror' 
	or genere = 'storia'
	or genere = 'thriller'
	or genere = 'umoristico'
	or genere = 'romanzo'
	or genere = 'biografia'
	or genere = 'giallo'),
	check(eta_consigliata > 5),
	check(prezzo_unitario < 600),
	check(numero_copie_disponibili > 0 and numero_copie_disponibili < 50000),
	check(incassi_totali > 0),
	check(punteggio_medio >= 0 and punteggio_medio <= 5)
);

CREATE TABLE universita(
    nome character varying(50) PRIMARY KEY,
    via character varying(50) NOT NULL,
    codice_fiscale character(16) NOT NULL,
    numero_studenti integer NOT NULL,
    tassa_annuale smallint NOT NULL,
    data_fondazione date NOT NULL,
    cinque_per_mille character(10) NOT NULL,
	check(numero_studenti > 0),
	check(tassa_annuale > 0 and tassa_annuale < 5000)
);

CREATE TABLE biblioteca (
    nome character varying(50) NOT NULL UNIQUE,
    numero_posti smallint NOT NULL,
    numero_libri_contenuti integer NOT NULL,
    numero_prese_corrente smallint NOT NULL,
    presenza_distributore boolean NOT NULL,
    bibliotecario character(16) NOT NULL,
    universita character varying(50),
	check(numero_posti > 50 and numero_posti < 150),
	check(numero_prese_corrente > 10 and numero_prese_corrente < 40),
	check(numero_libri_contenuti > 1 and numero_libri_contenuti < 50000),
	FOREIGN KEY(bibliotecario) REFERENCES bibliotecario(codice_fiscale),
    FOREIGN KEY(universita) REFERENCES universita(nome),
    PRIMARY KEY(nome,universita)
);

CREATE TABLE scaffale (
    codice smallint NOT NULL,
    biblioteca character varying(50) NOT NULL,
    genere character varying(50) NOT NULL,
    numero_ripiani smallint NOT NULL,
	PRIMARY KEY(codice,biblioteca),
	FOREIGN KEY(biblioteca) REFERENCES biblioteca(nome),
	check(numero_ripiani > 0 and numero_ripiani < 20),
	check(genere = 'fantasy' 
	or genere = 'rosa' 
	or genere = 'horror' 
	or genere = 'storia'
	or genere = 'thriller'
	or genere = 'umoristico'
	or genere = 'romanzo'
	or genere = 'biografia'
	or genere = 'giallo')
);

ALTER TABLE scaffale ALTER COLUMN codice ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME scaffale_codice_scaffale_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);

CREATE TABLE badge (
    id smallint NOT NULL UNIQUE,
    codice_barre character(15) NOT NULL,
	universita character varying(50) NOT NULL,
	PRIMARY KEY(id, universita),
	FOREIGN KEY(universita) REFERENCES universita(nome)
);

-- Viene assunto per le seguenti due tabelle, che il numero di telefono
-- sia quello con il prefisso italiano (+39, che quindi non viene salvato nella base di dati).

CREATE TABLE studente(
	nome character varying(50) NOT NULL,
    cognome character varying(50) NOT NULL,
    codice_fiscale character(16) NOT NULL,
    sesso character(7) NOT NULL,
    numero_telefono character(9) NOT NULL,
    data_nascita date NOT NULL,
    matricola integer NOT NULL,
	universita character varying(50) NOT NULL,
    badge smallint NOT NULL,
	check(sesso = 'Maschio' or sesso = 'Femmina'),
	PRIMARY KEY (universita, matricola),
	FOREIGN KEY(universita) REFERENCES universita(nome),
    FOREIGN KEY(badge) REFERENCES badge(id)
);

ALTER TABLE studente ALTER COLUMN matricola ADD GENERATED ALWAYS AS IDENTITY (
    SEQUENCE NAME id_studente
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);

CREATE TABLE contiene (
    libro character varying(100) NOT NULL,
    scaffale smallint NOT NULL,
    biblioteca character varying(50) NOT NULL,
	PRIMARY KEY (libro,scaffale,biblioteca),
	FOREIGN KEY(libro) REFERENCES libro(titolo),
	FOREIGN KEY(scaffale,biblioteca) REFERENCES scaffale(codice,biblioteca)
);

CREATE TABLE fondo_pubblico (
    numero_finanziamento integer NOT NULL,
    data_versamento date NOT NULL,
    importo integer NOT NULL,
    costi_previsti integer NOT NULL,
	universita character varying(50) NOT NULL,
	check(importo > 300000000 and importo < 1000000000),
    check(costi_previsti<importo),
	PRIMARY KEY(numero_finanziamento, universita),
	FOREIGN KEY(universita) REFERENCES universita(nome) 
);

CREATE TABLE fondo_privato (
    numero_finanziamento integer NOT NULL,
    data_versamento date NOT NULL,
    importo integer NOT NULL,
    nome_benefattore character varying(50) NOT NULL,
    cognome_benefattore character varying(50) NOT NULL,
	universita character varying(50) NOT NULL,
	check(importo > 1000 and importo < 100000000),
	PRIMARY KEY(numero_finanziamento, universita),
	FOREIGN KEY(universita) REFERENCES universita(nome) 
);

CREATE TABLE fornitore (
    partita_iva character(11) PRIMARY KEY,
    nome character varying(50) NOT NULL,
    via character varying(50) NOT NULL,
    numero_furgoni smallint NOT NULL,
	check(numero_furgoni > 5 and numero_furgoni < 1000)
);

CREATE TABLE fornisce_a (
    biblioteca character varying(50) NOT NULL,
    p_iva_fornitore character(11) NOT NULL,
	PRIMARY KEY(biblioteca,p_iva_fornitore),
    FOREIGN KEY(biblioteca) REFERENCES biblioteca(nome),
    FOREIGN KEY(p_iva_fornitore) REFERENCES fornitore(partita_iva)
);

CREATE TABLE fornisce_da (
    casa_editrice character varying(50) NOT NULL,
    p_iva_fornitore character(11) NOT NULL,
	PRIMARY KEY(casa_editrice,p_iva_fornitore),
    FOREIGN KEY(casa_editrice) REFERENCES casa_editrice(partita_iva),
    FOREIGN KEY(p_iva_fornitore) REFERENCES fornitore(partita_iva)
);

CREATE TABLE lavorato_a (
    biblioteca character varying(50) NOT NULL,
    bibliotecario character(16),
    data_inizio date NOT NULL,
    data_fine date NOT NULL,
	FOREIGN KEY(bibliotecario) REFERENCES bibliotecario(codice_fiscale),
	FOREIGN KEY(biblioteca) REFERENCES biblioteca(nome),
    PRIMARY KEY(biblioteca, bibliotecario, data_inizio, data_fine),
	check(data_inizio < data_fine)
);

CREATE TABLE noleggio(
    id integer,
    data_inizio date NOT NULL,
    data_fine date NOT NULL,
    libro character varying(50) NOT NULL,
	matricola integer NOT NULL,
	universita character varying(50) NOT NULL,
    punteggio_stelle smallint NOT NULL,
    biblioteca character varying(50) NOT NULL,
    importo_sanzione integer,
    motivazione character varying(100),
	check(data_inizio < data_fine), 
    check(importo_sanzione > 50 and importo_sanzione < 200),
	FOREIGN KEY(libro) REFERENCES libro(titolo),
	FOREIGN KEY(matricola,universita) REFERENCES studente(matricola,universita),
    FOREIGN KEY(biblioteca) REFERENCES biblioteca(nome),
    PRIMARY KEY(id, biblioteca),
    check(punteggio_stelle >= 1 and punteggio_stelle <= 5)
);

ALTER TABLE noleggio ALTER COLUMN id ADD GENERATED ALWAYS AS IDENTITY (
    SEQUENCE NAME noleggio_id
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);

CREATE TABLE acquisto(
	data_acquisto date NOT NULL,
	importo smallint NOT NULL,
	numero_copie smallint NOT NULL,
	libro character varying(100) NOT NULL,
	matricola integer NOT NULL,
	universita character varying(50) NOT NULL,
	check(numero_copie >= 1 and numero_copie <= 10),
	PRIMARY KEY(data_acquisto,matricola,universita,libro),
	FOREIGN KEY(libro) REFERENCES libro(titolo),
	FOREIGN KEY(matricola,universita) REFERENCES studente(matricola,universita)	
);

/*--------------------------INSERTS-----------------------------------*/

INSERT INTO autore VALUES ('WVCCHM29A60D999Z', 'Roberto', 'Tommasi', 'Maschio', '1995-04-02', 5);
INSERT INTO autore VALUES ('TGRRFR37H07M100G', 'Giovanna', 'Caruso', 'Femmina', '1982-09-22', 8);
INSERT INTO autore VALUES ('DVADJH29S28I652K', 'Domenico', 'Pasquale', 'Maschio', '1977-11-30', 17);
INSERT INTO autore VALUES ('SNBXTR79B27E221F', 'Giorgio', 'Orvello', 'Maschio', '1999-02-18', 4);
INSERT INTO autore VALUES ('RGNKNZ86R63B264A', 'Arianna', 'Parsi', 'Femmina', '1990-12-07', 2);

INSERT INTO casa_editrice VALUES ('Mondadori', 'Via Marcononi, 5, Milano', 390, 457381, '1889-04-24', '40887290092');
INSERT INTO casa_editrice VALUES ('Edizioni Piemme', 'Via G.Garibaldi, 7F, Roma', 356, 145629, '1982-01-14', '65325690207');
INSERT INTO casa_editrice VALUES ('Giulio Einaudi Editore', 'Via Umberto Biancamano 2, Torino', 277, 245629, '1933-12-22', '49109350527');
INSERT INTO casa_editrice VALUES ('De Agostini', 'Via Novara, 7F, Roma', 466, 442621, '1901-07-17', '23840250858');

INSERT INTO libro VALUES ('Sistema del caos', 488, 18, 'fantasy', 15, 14.0, 14119, 10472, 4.3, '49109350527', 'DVADJH29S28I652K');
INSERT INTO libro VALUES ('Bortaggio d''onore', 621, 9, 'rosa', 15, 37.0, 3121, 11031, 2.6, '49109350527', 'WVCCHM29A60D999Z');
INSERT INTO libro VALUES ('Twilight Aftermath', 93, 14, 'horror', 15, 45.0, 4410, 3787, 3.4, '23840250858', 'SNBXTR79B27E221F');
INSERT INTO libro VALUES ('Vampire Crusade', 103, 9, 'horror', 12, 54.0, 21211, 3728, 2.1, '49109350527', 'WVCCHM29A60D999Z');
INSERT INTO libro VALUES ('Scontro di conflitto', 395, 10, 'storia', 14, 32.0, 4745, 3315, 2.6, '49109350527', 'RGNKNZ86R63B264A');
INSERT INTO libro VALUES ('Uccidi di vendetta', 306, 13, 'romanzo', 17, 26.0, 1106, 6729, 2.2, '49109350527', 'DVADJH29S28I652K');
INSERT INTO libro VALUES ('Infettare il paese', 194, 13, 'thriller', 13, 21.0, 2252, 12568, 3.0, '65325690207', 'RGNKNZ86R63B264A');
INSERT INTO libro VALUES ('Demolire del combattimento', 115, 19, 'storia', 14, 36.0, 8400, 2379, 3.9, '65325690207', 'TGRRFR37H07M100G');
INSERT INTO libro VALUES ('Crimine e sepoltura', 411, 9, 'thriller', 12, 31.0, 3515, 6612, 4.6, '23840250858', 'DVADJH29S28I652K');
INSERT INTO libro VALUES ('Estinzione e risveglio', 474, 6, 'fantasy', 15, 51.0, 1934, 9622, 3.4, '49109350527', 'SNBXTR79B27E221F');
INSERT INTO libro VALUES ('Invasione e potere', 121, 9, 'storia', 17, 45.0, 3090, 4311, 4.5, '23840250858', 'SNBXTR79B27E221F');
INSERT INTO libro VALUES ('Pianeta e camera', 530, 9, 'umoristico', 17, 39.0, 2914, 13955, 3.7, '23840250858', 'RGNKNZ86R63B264A');
INSERT INTO libro VALUES ('Speranza e frenesia', 479, 14, 'rosa', 18, 16.0, 8603, 12859, 2.1, '49109350527', 'WVCCHM29A60D999Z');
INSERT INTO libro VALUES ('Angeli e controllo', 319, 13, 'rosa', 16, 34.0, 4289, 3895, 2.6, '40887290092', 'RGNKNZ86R63B264A');
INSERT INTO libro VALUES ('Tempo e bande', 560, 18, 'biografia', 18, 47.0, 1132, 3508, 3.4, '65325690207', 'WVCCHM29A60D999Z');
INSERT INTO libro VALUES ('Ordine e resistenza', 384, 9, 'romanzo', 14, 29.0, 3153, 3070, 2.5, '65325690207', 'SNBXTR79B27E221F');
INSERT INTO libro VALUES ('Biohunt', 388, 10, 'fantasy', 12, 49.0, 1631, 5670, 2.9, '40887290092', 'WVCCHM29A60D999Z');
INSERT INTO libro VALUES ('Biolina', 303, 19, 'umoristico', 18, 16.0, 2534, 3676, 2.9, '65325690207', 'DVADJH29S28I652K');
INSERT INTO libro VALUES ('Geoshot', 534, 13, 'fantasy', 15, 52.0, 1584, 3521, 3.5, '40887290092', 'RGNKNZ86R63B264A');
INSERT INTO libro VALUES ('Borderspace', 160, 16, 'giallo', 17, 34.0, 4149, 1854, 1.8, '23840250858', 'RGNKNZ86R63B264A');

INSERT INTO bibliotecario VALUES ('CRZNLE47E01Z107D', 'Antonella', 'Facci', '1986-07-25', 'Femmina', 1134, '2004-09-12');
INSERT INTO bibliotecario VALUES ('FBBFZD45P55L010Q', 'Domenico', 'Rossi', '1978-05-26', 'Maschio', 1248, '2008-03-26');
INSERT INTO bibliotecario VALUES ('FRTYVR56T44E038M', 'Giovanni', 'Caruso', '1988-09-15', 'Maschio', 1067, '2010-08-12');
INSERT INTO bibliotecario VALUES ('LRKSGG88P62L702G', 'Carlo', 'Pace', '1967-11-30', 'Maschio', 1296, '2001-07-02');
INSERT INTO bibliotecario VALUES ('MMNMWB31P60I341S', 'Luigina', 'Carti', '1968-04-13', 'Femmina', 1280, '2007-01-03');

INSERT INTO universita VALUES ('Università degli Studi di Venezia', 'Via Dorsoduro, 3246, Venezia', '80007720271     ', 45712, 4805, '1861-03-17', '238572980 ');
INSERT INTO universita VALUES ('Università degli Studi di Verona', 'Via Artigliere, 8, Verona', '93009870234     ', 52054, 3974, '1222-08-01', '541040232 ');
INSERT INTO universita VALUES ('Università degli Studi di Trieste', 'Piazzale Europa, 1, Trieste', '80013890324     ', 73354, 4157, '1924-03-12', '211830328 ');
INSERT INTO universita VALUES ('Università degli Studi di Roma "La Sapienza"', 'Piazzale Aldo Moro, 5, Roma', '80209930587     ', 122425, 4153, '1303-04-20', '133771002 ');
INSERT INTO universita VALUES ('Università degli Studi di Padova', 'Via 8 Febbraio, 2, Padova', '80006480281     ', 66422, 4217, '1222-08-01', '323545146 ');

INSERT INTO biblioteca VALUES ('A. Avogadro', 55, 7612, 11, true, 'CRZNLE47E01Z107D', 'Università degli Studi di Venezia');
INSERT INTO biblioteca VALUES ('Federico II', 125, 28548, 39, true, 'FBBFZD45P55L010Q', 'Università degli Studi di Verona');
INSERT INTO biblioteca VALUES ('G. Bedeschi', 67, 42021, 15, true, 'FRTYVR56T44E038M', 'Università degli Studi di Trieste');
INSERT INTO biblioteca VALUES ('G. D’Annunzio', 90, 29061, 35, true, 'LRKSGG88P62L702G', 'Università degli Studi di Roma "La Sapienza"');
INSERT INTO biblioteca VALUES ('P. Lupatoto', 70, 3145, 27, true, 'MMNMWB31P60I341S', 'Università degli Studi di Padova');

INSERT INTO lavorato_a VALUES ('G. Bedeschi', 'LRKSGG88P62L702G', '1992-04-16', '1996-10-01');
INSERT INTO lavorato_a VALUES ('Federico II', 'LRKSGG88P62L702G', '1998-02-04', '1999-11-05');
INSERT INTO lavorato_a VALUES ('P. Lupatoto', 'MMNMWB31P60I341S', '1988-05-14', '1991-06-26');
INSERT INTO lavorato_a VALUES ('A. Avogadro', 'MMNMWB31P60I341S', '1980-06-27', '1983-03-22');
INSERT INTO lavorato_a VALUES ('Federico II', 'MMNMWB31P60I341S', '1994-04-22', '2000-09-09');
INSERT INTO lavorato_a VALUES ('G. Bedeschi', 'CRZNLE47E01Z107D', '1999-01-07', '2001-06-17');

INSERT INTO scaffale VALUES (1, 'G. D’Annunzio', 'giallo', 2);
INSERT INTO scaffale VALUES (1, 'Federico II', 'horror', 9);
INSERT INTO scaffale VALUES (1, 'G. Bedeschi', 'romanzo', 8);
INSERT INTO scaffale VALUES (2, 'G. Bedeschi', 'storia', 8);
INSERT INTO scaffale VALUES (1, 'A. Avogadro', 'umoristico', 12);
INSERT INTO scaffale VALUES (2, 'A. Avogadro', 'biografia', 7);
INSERT INTO scaffale VALUES (3, 'A. Avogadro', 'umoristico', 11);
INSERT INTO scaffale VALUES (4, 'A. Avogadro', 'romanzo', 8);
INSERT INTO scaffale VALUES (3, 'G. D’Annunzio', 'biografia', 5);
INSERT INTO scaffale VALUES (4, 'G. D’Annunzio', 'horror', 6);
INSERT INTO scaffale VALUES (5, 'G. D’Annunzio', 'thriller', 5);
INSERT INTO scaffale VALUES (1, 'P. Lupatoto', 'romanzo', 7);
INSERT INTO scaffale VALUES (2, 'P. Lupatoto', 'giallo', 6);
INSERT INTO scaffale VALUES (3, 'P. Lupatoto', 'fantasy', 2);
INSERT INTO scaffale VALUES (2, 'G. D’Annunzio', 'biografia', 8);
INSERT INTO scaffale VALUES (2, 'Federico II', 'thriller', 9);
INSERT INTO scaffale VALUES (3, 'G. Bedeschi', 'giallo', 5);
INSERT INTO scaffale VALUES (4, 'G. Bedeschi', 'thriller', 7);
INSERT INTO scaffale VALUES (5, 'G. Bedeschi', 'giallo', 10);
INSERT INTO scaffale VALUES (6, 'G. Bedeschi', 'horror', 7);

INSERT INTO contiene VALUES ('Tempo e bande', 1, 'A. Avogadro');
INSERT INTO contiene VALUES ('Uccidi di vendetta', 2, 'A. Avogadro');
INSERT INTO contiene VALUES ('Angeli e controllo', 3, 'A. Avogadro');
INSERT INTO contiene VALUES ('Vampire Crusade', 4, 'A. Avogadro');
INSERT INTO contiene VALUES ('Bortaggio d''onore', 1, 'Federico II');
INSERT INTO contiene VALUES ('Sistema del caos', 2, 'Federico II');
INSERT INTO contiene VALUES ('Infettare il paese', 1, 'G. Bedeschi');
INSERT INTO contiene VALUES ('Scontro di conflitto', 2, 'G. Bedeschi');
INSERT INTO contiene VALUES ('Tempo e bande', 3, 'G. Bedeschi');
INSERT INTO contiene VALUES ('Speranza e frenesia', 4, 'G. Bedeschi');
INSERT INTO contiene VALUES ('Twilight Aftermath', 5, 'G. Bedeschi');
INSERT INTO contiene VALUES ('Biolina', 6, 'G. Bedeschi');
INSERT INTO contiene VALUES ('Demolire del combattimento', 1, 'G. D’Annunzio');
INSERT INTO contiene VALUES ('Estinzione e risveglio', 2, 'G. D’Annunzio');
INSERT INTO contiene VALUES ('Bortaggio d''onore', 3, 'G. D’Annunzio');
INSERT INTO contiene VALUES ('Demolire del combattimento', 4, 'G. D’Annunzio');
INSERT INTO contiene VALUES ('Sistema del caos', 5, 'G. D’Annunzio');
INSERT INTO contiene VALUES ('Scontro di conflitto', 1, 'P. Lupatoto');
INSERT INTO contiene VALUES ('Borderspace', 2, 'P. Lupatoto');
INSERT INTO contiene VALUES ('Invasione e potere', 3, 'P. Lupatoto');
INSERT INTO contiene VALUES ('Biolina', 1, 'A. Avogadro');
INSERT INTO contiene VALUES ('Tempo e bande', 2, 'A. Avogadro');
INSERT INTO contiene VALUES ('Crimine e sepoltura', 3, 'A. Avogadro');
INSERT INTO contiene VALUES ('Bortaggio d''onore', 4, 'A. Avogadro');
INSERT INTO contiene VALUES ('Biolina', 1, 'Federico II');
INSERT INTO contiene VALUES ('Speranza e frenesia', 2, 'Federico II');
INSERT INTO contiene VALUES ('Scontro di conflitto', 1, 'G. Bedeschi');
INSERT INTO contiene VALUES ('Vampire Crusade', 2, 'G. Bedeschi');
INSERT INTO contiene VALUES ('Bortaggio d''onore', 3, 'G. Bedeschi');
INSERT INTO contiene VALUES ('Twilight Aftermath', 4, 'G. Bedeschi');
INSERT INTO contiene VALUES ('Uccidi di vendetta', 5, 'G. Bedeschi');
INSERT INTO contiene VALUES ('Ordine e resistenza', 6, 'G. Bedeschi');
INSERT INTO contiene VALUES ('Geoshot', 1, 'G. D’Annunzio');
INSERT INTO contiene VALUES ('Bortaggio d''onore', 2, 'G. D’Annunzio');
INSERT INTO contiene VALUES ('Crimine e sepoltura', 3, 'G. D’Annunzio');
INSERT INTO contiene VALUES ('Scontro di conflitto', 4, 'G. D’Annunzio');
INSERT INTO contiene VALUES ('Twilight Aftermath', 5, 'G. D’Annunzio');
INSERT INTO contiene VALUES ('Infettare il paese', 1, 'P. Lupatoto');
INSERT INTO contiene VALUES ('Demolire del combattimento', 2, 'P. Lupatoto');
INSERT INTO contiene VALUES ('Vampire Crusade', 3, 'P. Lupatoto');
INSERT INTO contiene VALUES ('Pianeta e camera', 1, 'A. Avogadro');
INSERT INTO contiene VALUES ('Crimine e sepoltura', 2, 'A. Avogadro');
INSERT INTO contiene VALUES ('Speranza e frenesia', 3, 'A. Avogadro');
INSERT INTO contiene VALUES ('Borderspace', 4, 'A. Avogadro');
INSERT INTO contiene VALUES ('Sistema del caos', 1, 'Federico II');
INSERT INTO contiene VALUES ('Geoshot', 2, 'Federico II');
INSERT INTO contiene VALUES ('Biolina', 1, 'G. Bedeschi');
INSERT INTO contiene VALUES ('Ordine e resistenza', 2, 'G. Bedeschi');
INSERT INTO contiene VALUES ('Uccidi di vendetta', 3, 'G. Bedeschi');
INSERT INTO contiene VALUES ('Uccidi di vendetta', 4, 'G. Bedeschi');
INSERT INTO contiene VALUES ('Demolire del combattimento', 5, 'G. Bedeschi');
INSERT INTO contiene VALUES ('Angeli e controllo', 6, 'G. Bedeschi');
INSERT INTO contiene VALUES ('Biolina', 1, 'G. D’Annunzio');
INSERT INTO contiene VALUES ('Infettare il paese', 2, 'G. D’Annunzio');
INSERT INTO contiene VALUES ('Biolina', 3, 'G. D’Annunzio');
INSERT INTO contiene VALUES ('Biolina', 4, 'G. D’Annunzio');
INSERT INTO contiene VALUES ('Tempo e bande', 5, 'G. D’Annunzio');
INSERT INTO contiene VALUES ('Pianeta e camera', 1, 'P. Lupatoto');
INSERT INTO contiene VALUES ('Speranza e frenesia', 2, 'P. Lupatoto');
INSERT INTO contiene VALUES ('Demolire del combattimento', 3, 'P. Lupatoto');
INSERT INTO contiene VALUES ('Biohunt', 1, 'A. Avogadro');
INSERT INTO contiene VALUES ('Speranza e frenesia', 2, 'A. Avogadro');
INSERT INTO contiene VALUES ('Pianeta e camera', 3, 'A. Avogadro');
INSERT INTO contiene VALUES ('Biohunt', 4, 'A. Avogadro');
INSERT INTO contiene VALUES ('Vampire Crusade', 1, 'Federico II');
INSERT INTO contiene VALUES ('Borderspace', 2, 'Federico II');
INSERT INTO contiene VALUES ('Tempo e bande', 1, 'G. Bedeschi');
INSERT INTO contiene VALUES ('Biolina', 2, 'G. Bedeschi');
INSERT INTO contiene VALUES ('Estinzione e risveglio', 3, 'G. Bedeschi');
INSERT INTO contiene VALUES ('Borderspace', 4, 'G. Bedeschi');
INSERT INTO contiene VALUES ('Tempo e bande', 5, 'G. Bedeschi');
INSERT INTO contiene VALUES ('Crimine e sepoltura', 6, 'G. Bedeschi');
INSERT INTO contiene VALUES ('Crimine e sepoltura', 1, 'G. D’Annunzio');
INSERT INTO contiene VALUES ('Speranza e frenesia', 2, 'G. D’Annunzio');
INSERT INTO contiene VALUES ('Sistema del caos', 3, 'G. D’Annunzio');
INSERT INTO contiene VALUES ('Borderspace', 4, 'G. D’Annunzio');
INSERT INTO contiene VALUES ('Vampire Crusade', 5, 'G. D’Annunzio');
INSERT INTO contiene VALUES ('Bortaggio d''onore', 1, 'P. Lupatoto');
INSERT INTO contiene VALUES ('Twilight Aftermath', 2, 'P. Lupatoto');
INSERT INTO contiene VALUES ('Borderspace', 3, 'P. Lupatoto');
INSERT INTO contiene VALUES ('Bortaggio d''onore', 1, 'A. Avogadro');
INSERT INTO contiene VALUES ('Sistema del caos', 2, 'A. Avogadro');
INSERT INTO contiene VALUES ('Sistema del caos', 3, 'A. Avogadro');
INSERT INTO contiene VALUES ('Demolire del combattimento', 4, 'A. Avogadro');
INSERT INTO contiene VALUES ('Borderspace', 1, 'Federico II');
INSERT INTO contiene VALUES ('Tempo e bande', 2, 'Federico II');
INSERT INTO contiene VALUES ('Demolire del combattimento', 1, 'G. Bedeschi');
INSERT INTO contiene VALUES ('Borderspace', 2, 'G. Bedeschi');
INSERT INTO contiene VALUES ('Scontro di conflitto', 3, 'G. Bedeschi');
INSERT INTO contiene VALUES ('Biolina', 4, 'G. Bedeschi');
INSERT INTO contiene VALUES ('Borderspace', 5, 'G. Bedeschi');
INSERT INTO contiene VALUES ('Infettare il paese', 6, 'G. Bedeschi');
INSERT INTO contiene VALUES ('Estinzione e risveglio', 1, 'G. D’Annunzio');
INSERT INTO contiene VALUES ('Pianeta e camera', 2, 'G. D’Annunzio');
INSERT INTO contiene VALUES ('Vampire Crusade', 3, 'G. D’Annunzio');
INSERT INTO contiene VALUES ('Speranza e frenesia', 4, 'G. D’Annunzio');
INSERT INTO contiene VALUES ('Uccidi di vendetta', 5, 'G. D’Annunzio');
INSERT INTO contiene VALUES ('Estinzione e risveglio', 1, 'P. Lupatoto');
INSERT INTO contiene VALUES ('Vampire Crusade', 2, 'P. Lupatoto');
INSERT INTO contiene VALUES ('Estinzione e risveglio', 3, 'P. Lupatoto');

INSERT INTO fornitore VALUES ( '55808500486', 'GLS', 'Via Marconi, 4, Torino', 124);
INSERT INTO fornitore VALUES ('75324680778', 'UPS', 'Via Nazzareno, 2, Milano ', 155);
INSERT INTO fornitore VALUES ('50057910353', 'Poste Italiane', 'Via Stadera, 45, Roma ', 432);
INSERT INTO fornitore VALUES ('17137550327', 'BRT bartolini', 'Via Antonio da Legnago, 279, Treviso', 124);
INSERT INTO fornitore VALUES ('15385390222', 'FedEx', 'Via Moiariello, 55, Milano', 89);

INSERT INTO fornisce_a VALUES ('P. Lupatoto', '15385390222');
INSERT INTO fornisce_a VALUES ('G. D’Annunzio', '17137550327');
INSERT INTO fornisce_a VALUES ('A. Avogadro', '55808500486');
INSERT INTO fornisce_a VALUES ('A. Avogadro', '75324680778');
INSERT INTO fornisce_a VALUES ('A. Avogadro', '15385390222');
INSERT INTO fornisce_a VALUES ('A. Avogadro', '17137550327');
INSERT INTO fornisce_a VALUES ('P. Lupatoto', '50057910353');
INSERT INTO fornisce_a VALUES ('G. Bedeschi', '55808500486');
INSERT INTO fornisce_a VALUES ('Federico II', '15385390222');
INSERT INTO fornisce_a VALUES ('Federico II', '17137550327');
INSERT INTO fornisce_a VALUES ('G. Bedeschi', '15385390222');
INSERT INTO fornisce_a VALUES ('Federico II', '55808500486');
INSERT INTO fornisce_a VALUES ('A. Avogadro', '50057910353');
INSERT INTO fornisce_a VALUES ('G. D’Annunzio', '55808500486');
INSERT INTO fornisce_a VALUES ('Federico II', '75324680778');
INSERT INTO fornisce_a VALUES ('Federico II', '50057910353');
INSERT INTO fornisce_a VALUES ('G. D’Annunzio', '50057910353');


INSERT INTO fornisce_da VALUES ('23840250858', '55808500486');
INSERT INTO fornisce_da VALUES ('23840250858', '75324680778');
INSERT INTO fornisce_da VALUES ('23840250858', '50057910353');
INSERT INTO fornisce_da VALUES ('23840250858', '17137550327');
INSERT INTO fornisce_da VALUES ('65325690207', '75324680778');
INSERT INTO fornisce_da VALUES ('65325690207', '50057910353');
INSERT INTO fornisce_da VALUES ('65325690207', '17137550327');
INSERT INTO fornisce_da VALUES ('49109350527', '55808500486');
INSERT INTO fornisce_da VALUES ('49109350527', '50057910353');
INSERT INTO fornisce_da VALUES ('40887290092', '75324680778');
INSERT INTO fornisce_da VALUES ('40887290092', '55808500486');
INSERT INTO fornisce_da VALUES ('40887290092', '50057910353');
INSERT INTO fornisce_da VALUES ('40887290092', '17137550327');
INSERT INTO fornisce_da VALUES ('40887290092', '15385390222');

INSERT INTO fondo_pubblico  VALUES (1, '2020-01-01', 822057690, 722057690, 'Università degli Studi di Padova');
INSERT INTO fondo_pubblico  VALUES (1, '2020-01-01', 380083563, 330083563, 'Università degli Studi di Roma "La Sapienza"');
INSERT INTO fondo_pubblico  VALUES (1, '2020-01-01', 661259120, 561259120, 'Università degli Studi di Trieste');
INSERT INTO fondo_pubblico  VALUES (1, '2020-01-01', 464142130, 364142130, 'Università degli Studi di Venezia');
INSERT INTO fondo_pubblico  VALUES (1, '2020-01-01', 670437821, 470437821, 'Università degli Studi di Verona');
INSERT INTO fondo_pubblico  VALUES (2, '2021-01-01', 597027087, 447027087, 'Università degli Studi di Padova');
INSERT INTO fondo_pubblico  VALUES (2, '2021-01-01', 400278027, 390278027, 'Università degli Studi di Roma "La Sapienza"');
INSERT INTO fondo_pubblico  VALUES (2, '2021-01-01', 490278237, 390278237, 'Università degli Studi di Trieste');
INSERT INTO fondo_pubblico  VALUES (2, '2021-01-01', 750727373, 550727373, 'Università degli Studi di Venezia');
INSERT INTO fondo_pubblico  VALUES (2, '2021-01-01', 482135485, 472135485, 'Università degli Studi di Verona');
INSERT INTO fondo_pubblico  VALUES (3, '2022-01-01', 469387354, 369387354, 'Università degli Studi di Padova');
INSERT INTO fondo_pubblico  VALUES (3, '2022-01-01', 695378354, 595378354, 'Università degli Studi di Roma "La Sapienza"');
INSERT INTO fondo_pubblico  VALUES (3, '2022-01-01', 390378357, 340378357, 'Università degli Studi di Trieste');
INSERT INTO fondo_pubblico  VALUES (3, '2022-01-01', 344378514, 304378514, 'Università degli Studi di Venezia');
INSERT INTO fondo_pubblico  VALUES (3, '2022-01-01', 719378646, 619378646, 'Università degli Studi di Verona');
INSERT INTO fondo_pubblico  VALUES (4, '2023-01-01', 383000756, 303000756, 'Università degli Studi di Padova');
INSERT INTO fondo_pubblico  VALUES (4, '2023-01-01', 517089007, 510089007, 'Università degli Studi di Roma "La Sapienza"');
INSERT INTO fondo_pubblico  VALUES (4, '2023-01-01', 330365427, 320365427, 'Università degli Studi di Trieste');
INSERT INTO fondo_pubblico  VALUES (4, '2023-01-01', 450007845, 450007545, 'Università degli Studi di Venezia');
INSERT INTO fondo_pubblico  VALUES (4, '2023-01-01', 442786740, 342786740, 'Università degli Studi di Verona');

INSERT INTO fondo_privato VALUES (1, '2020-03-05', 235950, 'Sara', 'Turati', 'Università degli Studi di Verona');
INSERT INTO fondo_privato VALUES (1, '2023-06-01', 3505500, 'Vincenzo', 'Rugoli', 'Università degli Studi di Venezia');
INSERT INTO fondo_privato VALUES (1, '2021-09-14', 257780, 'Basilio', 'Nobile', 'Università degli Studi di Roma "La Sapienza"');
INSERT INTO fondo_privato VALUES (1, '2021-01-05', 150750, 'Carlo', 'Vincenzi', 'Università degli Studi di Padova');
INSERT INTO fondo_privato VALUES (2, '2023-02-17', 50500250, 'Marilisa', 'Santi', 'Università degli Studi di Padova');

INSERT INTO badge OVERRIDING SYSTEM VALUE VALUES (1, '479047767422998', 'Università degli Studi di Padova');
INSERT INTO badge OVERRIDING SYSTEM VALUE VALUES (2, '260417706699822', 'Università degli Studi di Padova');
INSERT INTO badge OVERRIDING SYSTEM VALUE VALUES (3, '635619871593278', 'Università degli Studi di Padova');
INSERT INTO badge OVERRIDING SYSTEM VALUE VALUES (4, '035816025979312', 'Università degli Studi di Padova');
INSERT INTO badge OVERRIDING SYSTEM VALUE VALUES (5, '882919980000393', 'Università degli Studi di Padova');
INSERT INTO badge OVERRIDING SYSTEM VALUE VALUES (6, '460720426909314', 'Università degli Studi di Padova');
INSERT INTO badge OVERRIDING SYSTEM VALUE VALUES (7, '091682825011524', 'Università degli Studi di Padova');
INSERT INTO badge OVERRIDING SYSTEM VALUE VALUES (8, '699241093659775', 'Università degli Studi di Padova');
INSERT INTO badge OVERRIDING SYSTEM VALUE VALUES (9, '572340972117755', 'Università degli Studi di Roma "La Sapienza"');
INSERT INTO badge OVERRIDING SYSTEM VALUE VALUES (10, '317970912141653','Università degli Studi di Roma "La Sapienza"');
INSERT INTO badge OVERRIDING SYSTEM VALUE VALUES (11, '609947421175166','Università degli Studi di Roma "La Sapienza"');
INSERT INTO badge OVERRIDING SYSTEM VALUE VALUES (12, '034539917407898','Università degli Studi di Roma "La Sapienza"');
INSERT INTO badge OVERRIDING SYSTEM VALUE VALUES (13, '577910630882663','Università degli Studi di Roma "La Sapienza"');
INSERT INTO badge OVERRIDING SYSTEM VALUE VALUES (14, '397092732905319','Università degli Studi di Trieste');
INSERT INTO badge OVERRIDING SYSTEM VALUE VALUES (15, '648216793698876','Università degli Studi di Trieste');
INSERT INTO badge OVERRIDING SYSTEM VALUE VALUES (16, '619293867788953','Università degli Studi di Trieste');
INSERT INTO badge OVERRIDING SYSTEM VALUE VALUES (17, '397563613235000','Università degli Studi di Trieste');
INSERT INTO badge OVERRIDING SYSTEM VALUE VALUES (18, '732291459276098','Università degli Studi di Venezia');
INSERT INTO badge OVERRIDING SYSTEM VALUE VALUES (19, '397086468462424','Università degli Studi di Venezia');
INSERT INTO badge OVERRIDING SYSTEM VALUE VALUES (20, '989474540526064','Università degli Studi di Venezia');
INSERT INTO badge OVERRIDING SYSTEM VALUE VALUES (21, '201603196286220','Università degli Studi di Verona');
INSERT INTO badge OVERRIDING SYSTEM VALUE VALUES (22, '660507831706872','Università degli Studi di Verona');
INSERT INTO badge OVERRIDING SYSTEM VALUE VALUES (23, '153650843000154','Università degli Studi di Verona');
INSERT INTO badge OVERRIDING SYSTEM VALUE VALUES (24, '495482342578832','Università degli Studi di Verona');
INSERT INTO badge OVERRIDING SYSTEM VALUE VALUES (25, '566032423465853','Università degli Studi di Verona');
INSERT INTO badge OVERRIDING SYSTEM VALUE VALUES (26, '962281863656747','Università degli Studi di Verona');

INSERT INTO studente OVERRIDING SYSTEM VALUE VALUES ('Giovanni', 'Zanuso', 'HDTNVM56T21B046V', 'Maschio', '342679364', '2000-06-02', 64, 'Università degli Studi di Venezia', 19);
INSERT INTO studente OVERRIDING SYSTEM VALUE VALUES ('Viola', 'Pacci', 'VHHDFR77B27E471A', 'Femmina', '65268211 ', '1999-05-02', 89, 'Università degli Studi di Padova', 1);
INSERT INTO studente OVERRIDING SYSTEM VALUE VALUES ('Maria', 'Franchi', 'BVSXMR72R22D946M', 'Femmina', '323968366', '2000-07-29', 66, 'Università degli Studi di Padova', 2);
INSERT INTO studente OVERRIDING SYSTEM VALUE VALUES ('Benedetta', 'Desio', 'NSWQRM48L23H195Z', 'Femmina', '8085949  ', '2002-06-14', 77, 'Università degli Studi di Padova', 3);
INSERT INTO studente OVERRIDING SYSTEM VALUE VALUES ('Paolo', 'Reale', 'FWSPBH54C50G097A', 'Maschio', '58585088 ', '2001-12-30', 79, 'Università degli Studi di Padova', 4);
INSERT INTO studente OVERRIDING SYSTEM VALUE VALUES ('Toddeo', 'Ringo', 'CYKMNR59E43C544U', 'Maschio', '10574912 ', '1998-10-09', 80, 'Università degli Studi di Padova', 5);
INSERT INTO studente OVERRIDING SYSTEM VALUE VALUES ('Giovanni', 'Doe', 'SHMZTI52E63I230I', 'Femmina', '18361667 ', '1999-03-18', 85, 'Università degli Studi di Padova', 6);
INSERT INTO studente OVERRIDING SYSTEM VALUE VALUES ('Mario', 'Rossi', 'LVKLRS84A60A019O', 'Maschio', '37658046 ', '2001-12-19', 86, 'Università degli Studi di Padova', 7);
INSERT INTO studente OVERRIDING SYSTEM VALUE VALUES ('Donatella', 'Genovese', 'CFENYG35L44B440C', 'Femmina', '21940833 ', '2001-03-02', 87, 'Università degli Studi di Padova', 8);
INSERT INTO studente OVERRIDING SYSTEM VALUE VALUES ('Mattia', 'Desino', 'XLPVCY55H45G022Z', 'Maschio', '28131998 ', '2001-02-06', 76, 'Università degli Studi di Roma "La Sapienza"', 9);
INSERT INTO studente OVERRIDING SYSTEM VALUE VALUES ('Vittorio', 'Codemani', 'FFLMZT97R67G568X', 'Maschio', '40418425 ', '2000-06-01', 73, 'Università degli Studi di Roma "La Sapienza"', 10);
INSERT INTO studente OVERRIDING SYSTEM VALUE VALUES ('Riccardo', 'Archi', 'BPLRZG61R30G402J', 'Maschio', '54732008 ', '1999-07-03', 74, 'Università degli Studi di Roma "La Sapienza"', 11);
INSERT INTO studente OVERRIDING SYSTEM VALUE VALUES ('Romeo', 'Beato', 'SHLTDW33D14D784F', 'Maschio', '82587290 ', '2000-12-05', 75, 'Università degli Studi di Roma "La Sapienza"', 12);
INSERT INTO studente OVERRIDING SYSTEM VALUE VALUES ('Gloria', 'Mattei', 'LCNGMP75R49F579K', 'Femmina', '355763094', '2001-12-09', 65, 'Università degli Studi di Roma "La Sapienza"', 13);
INSERT INTO studente OVERRIDING SYSTEM VALUE VALUES ('Luca', 'Boschi', 'MJCMNN95L61D595V', 'Maschio', '65724472 ', '1999-01-20', 78, 'Università degli Studi di Trieste', 14);
INSERT INTO studente OVERRIDING SYSTEM VALUE VALUES ('Domenico', 'Bini', 'MFFYFO80S20Z314H', 'Maschio', '34324090 ', '2000-07-29', 69, 'Università degli Studi di Trieste', 15);
INSERT INTO studente OVERRIDING SYSTEM VALUE VALUES ('Stefania', 'Colli', 'SQRVSD68E26E907H', 'Femmina', '42421289 ', '1998-01-03', 82, 'Università degli Studi di Trieste', 16);
INSERT INTO studente OVERRIDING SYSTEM VALUE VALUES ('Vittoria', 'Giorni', 'LRCGMY70P12B707F', 'Femmina', '79781264 ', '2000-11-24', 72, 'Università degli Studi di Trieste', 17);
INSERT INTO studente OVERRIDING SYSTEM VALUE VALUES ('Carlo', 'Maledi', 'PDYZHW54H21E323U', 'Maschio', '341456383', '2000-06-02', 67, 'Università degli Studi di Venezia', 18);
INSERT INTO studente OVERRIDING SYSTEM VALUE VALUES ('Veronica', 'Carli', 'HNMQTB71M19Z139E', 'Femmina', '322422749', '2003-07-18', 68, 'Università degli Studi di Venezia', 20);
INSERT INTO studente OVERRIDING SYSTEM VALUE VALUES ('Carla', 'Giusi', 'LHJCNP55R28I305O', 'Femmina', '35373470 ', '2001-03-13', 71, 'Università degli Studi di Verona', 21);
INSERT INTO studente OVERRIDING SYSTEM VALUE VALUES ('Giorgina', 'Russo', 'MNPMQW71T05G307T', 'Femmina', '24619132 ', '2001-01-27', 84, 'Università degli Studi di Verona', 22);
INSERT INTO studente OVERRIDING SYSTEM VALUE VALUES ('Luigi', 'Verdi', 'TVRRDX93C58H926G', 'Maschio', '19474769 ', '2000-10-22', 88, 'Università degli Studi di Verona', 23);
INSERT INTO studente OVERRIDING SYSTEM VALUE VALUES ('Vestimo', 'Massi', 'FNLTBD78R70H188X', 'Maschio', '58271677 ', '2000-03-07', 81, 'Università degli Studi di Verona', 24);
INSERT INTO studente OVERRIDING SYSTEM VALUE VALUES ('Celestina', 'Moretti', 'DDGLZV34M62L106Q', 'Femmina', '7477387  ', '2002-03-06', 83, 'Università degli Studi di Verona', 25);
INSERT INTO studente OVERRIDING SYSTEM VALUE VALUES ('Leonardo', 'Exon', 'RRYBVF98B27Z224Y', 'Maschio', '56754909 ', '2000-02-13', 70, 'Università degli Studi di Verona', 26);

INSERT INTO acquisto VALUES ('2022-07-11', 92, 8, 'Bortaggio d''onore', 64, 'Università degli Studi di Venezia');
INSERT INTO acquisto VALUES ('2022-07-13', 90, 9, 'Biolina', 83, 'Università degli Studi di Verona');
INSERT INTO acquisto VALUES ('2023-05-23', 86, 8, 'Ordine e resistenza', 74, 'Università degli Studi di Roma "La Sapienza"');
INSERT INTO acquisto VALUES ('2022-02-26', 40, 3, 'Crimine e sepoltura', 64, 'Università degli Studi di Venezia');
INSERT INTO acquisto VALUES ('2023-05-25', 14, 1, 'Angeli e controllo', 88, 'Università degli Studi di Verona');
INSERT INTO acquisto VALUES ('2022-06-29', 33, 4, 'Biohunt', 89, 'Università degli Studi di Padova');
INSERT INTO acquisto VALUES ('2022-12-06', 54, 7, 'Angeli e controllo', 71, 'Università degli Studi di Verona');
INSERT INTO acquisto VALUES ('2022-12-10', 51, 4, 'Demolire del combattimento', 86, 'Università degli Studi di Padova');
INSERT INTO acquisto VALUES ('2023-04-18', 13, 1, 'Angeli e controllo', 66, 'Università degli Studi di Padova');
INSERT INTO acquisto VALUES ('2022-11-20', 23, 2, 'Infettare il paese', 70, 'Università degli Studi di Verona');

INSERT INTO noleggio OVERRIDING SYSTEM VALUE VALUES (1, '2023-05-29', '2023-06-06', 'Angeli e controllo', 67, 'Università degli Studi di Venezia',                     5,  'A. Avogadro', 51, 'libro rovinato');
INSERT INTO noleggio OVERRIDING SYSTEM VALUE VALUES (2, '2023-05-16', '2023-06-21', 'Biohunt', 82, 'Università degli Studi di Trieste',                                4,  'A. Avogadro', null, null);
INSERT INTO noleggio OVERRIDING SYSTEM VALUE VALUES (3, '2023-01-09', '2023-06-12', 'Biolina', 78, 'Università degli Studi di Trieste',                                2,  'A. Avogadro', null, null);
INSERT INTO noleggio OVERRIDING SYSTEM VALUE VALUES (4, '2022-03-23', '2022-05-01', 'Borderspace', 81, 'Università degli Studi di Verona',                             4,  'A. Avogadro', 56, 'ritardo');
INSERT INTO noleggio OVERRIDING SYSTEM VALUE VALUES (5, '2022-01-23', '2022-10-07', 'Bortaggio d''onore', 80, 'Università degli Studi di Padova',                      4,  'A. Avogadro', null, null);
INSERT INTO noleggio OVERRIDING SYSTEM VALUE VALUES (6, '2022-06-03', '2022-08-27', 'Crimine e sepoltura', 89, 'Università degli Studi di Padova',                     1,  'A. Avogadro', null, null);
INSERT INTO noleggio OVERRIDING SYSTEM VALUE VALUES (1, '2022-10-05', '2022-12-28', 'Demolire del combattimento', 76, 'Università degli Studi di Roma "La Sapienza"',  1,  'Federico II', null, null);
INSERT INTO noleggio OVERRIDING SYSTEM VALUE VALUES (2, '2022-09-27', '2023-04-22', 'Estinzione e risveglio', 68, 'Università degli Studi di Venezia',                 3,  'Federico II', 134, 'libro rovinato');
INSERT INTO noleggio OVERRIDING SYSTEM VALUE VALUES (3, '2022-12-03', '2023-02-05', 'Geoshot', 65, 'Università degli Studi di Roma "La Sapienza"',                     5,  'Federico II', null, null);
INSERT INTO noleggio OVERRIDING SYSTEM VALUE VALUES (4, '2023-05-16', '2023-06-12', 'Infettare il paese', 66, 'Università degli Studi di Padova',                      1, 'Federico II', null, null);
INSERT INTO noleggio OVERRIDING SYSTEM VALUE VALUES (5, '2022-08-30', '2023-04-24', 'Invasione e potere', 70, 'Università degli Studi di Verona',                      2, 'Federico II', 83, 'ritardo');
INSERT INTO noleggio OVERRIDING SYSTEM VALUE VALUES (6, '2022-01-14', '2023-03-19', 'Ordine e resistenza', 71, 'Università degli Studi di Verona',                     4, 'Federico II', null, null);
INSERT INTO noleggio OVERRIDING SYSTEM VALUE VALUES (7, '2022-04-30', '2022-10-22', 'Pianeta e camera', 72, 'Università degli Studi di Trieste',                       2, 'Federico II', null, null);
INSERT INTO noleggio OVERRIDING SYSTEM VALUE VALUES (8, '2022-02-26', '2022-05-16', 'Scontro di conflitto', 74, 'Università degli Studi di Roma "La Sapienza"',        3, 'Federico II', 60, 'perdita');
INSERT INTO noleggio OVERRIDING SYSTEM VALUE VALUES (1, '2022-05-02', '2022-07-19', 'Sistema del caos', 73, 'Università degli Studi di Roma "La Sapienza"',            1, 'G. Bedeschi', null, null);
INSERT INTO noleggio OVERRIDING SYSTEM VALUE VALUES (2, '2022-12-04', '2022-12-31', 'Speranza e frenesia', 79, 'Università degli Studi di Padova',                     5, 'G. Bedeschi', 121, 'ritardo');
INSERT INTO noleggio OVERRIDING SYSTEM VALUE VALUES (3, '2023-06-08', '2023-06-13', 'Tempo e bande', 75, 'Università degli Studi di Roma "La Sapienza"',               1, 'G. Bedeschi', null, null);
INSERT INTO noleggio OVERRIDING SYSTEM VALUE VALUES (4, '2022-02-07', '2022-07-08', 'Twilight Aftermath', 83, 'Università degli Studi di Verona',                      2, 'G. Bedeschi', null, null);
INSERT INTO noleggio OVERRIDING SYSTEM VALUE VALUES (1, '2023-04-26', '2023-06-24', 'Uccidi di vendetta', 87, 'Università degli Studi di Padova',                      3, 'G. D’Annunzio', 55, 'perdita');
INSERT INTO noleggio OVERRIDING SYSTEM VALUE VALUES (2, '2023-05-10', '2023-08-02', 'Vampire Crusade', 76, 'Università degli Studi di Roma "La Sapienza"',             4, 'G. D’Annunzio', null, null);
INSERT INTO noleggio OVERRIDING SYSTEM VALUE VALUES (3, '2022-08-16', '2023-01-22', 'Angeli e controllo', 77, 'Università degli Studi di Padova',                      5, 'G. D’Annunzio', null, null);
INSERT INTO noleggio OVERRIDING SYSTEM VALUE VALUES (4, '2022-08-08', '2023-02-24', 'Biohunt', 78, 'Università degli Studi di Trieste',                                1, 'G. D’Annunzio', null, null);
INSERT INTO noleggio OVERRIDING SYSTEM VALUE VALUES (5, '2022-09-19', '2023-01-20', 'Biolina', 79, 'Università degli Studi di Padova',                                 1, 'G. D’Annunzio', 94, 'perdita');
INSERT INTO noleggio OVERRIDING SYSTEM VALUE VALUES (6, '2022-03-18', '2023-01-22', 'Borderspace', 84, 'Università degli Studi di Verona',                             2, 'G. D’Annunzio', null, null);
INSERT INTO noleggio OVERRIDING SYSTEM VALUE VALUES (7, '2023-04-12', '2023-08-02', 'Bortaggio d''onore', 64, 'Università degli Studi di Venezia',                     5, 'G. D’Annunzio', null, null);
INSERT INTO noleggio OVERRIDING SYSTEM VALUE VALUES (1, '2022-11-05', '2023-07-13', 'Crimine e sepoltura', 85, 'Università degli Studi di Padova',                     5, 'P. Lupatoto', null, null);
INSERT INTO noleggio OVERRIDING SYSTEM VALUE VALUES (2, '2023-05-11', '2023-06-30', 'Demolire del combattimento', 86, 'Università degli Studi di Padova',              4, 'P. Lupatoto', null, null);
INSERT INTO noleggio OVERRIDING SYSTEM VALUE VALUES (3, '2022-08-09', '2023-07-07', 'Estinzione e risveglio', 69, 'Università degli Studi di Trieste',                 3, 'P. Lupatoto', null, null);
INSERT INTO noleggio OVERRIDING SYSTEM VALUE VALUES (4, '2022-04-27', '2022-11-02', 'Geoshot', 88, 'Università degli Studi di Verona',                                 3, 'P. Lupatoto', 127, 'ritardo');
INSERT INTO noleggio OVERRIDING SYSTEM VALUE VALUES (5, '2022-11-05', '2023-05-02', 'Infettare il paese', 77, 'Università degli Studi di Padova',                      4, 'P. Lupatoto', null, null);


/*1 Ricerca dell’autore che ha avuto più incassi.*/
SELECT a.nome, a.cognome, SUM(l.incassi_totali) FROM autore AS a
INNER JOIN libro as l ON l.autore = a.codice_fiscale
GROUP BY a.nome,a.cognome
ORDER BY SUM(l.incassi_totali) DESC;

/*2 Visualizzare per ogni noleggio con una sanzione maggiore di 20 euro il motivo.*/
SELECT n.id, n.motivazione FROM noleggio AS n
WHERE (n.importo_sanzione > 100);

/*3 Per ogni università visualizzare i badge degli studenti che hanno effettuato degli acquisti con un importo maggiore di 100 euro.*/
SELECT b.codice_barre, s.nome, s.cognome FROM badge AS b
INNER JOIN studente as s ON b.id=s.badge AND b.universita=s.universita
INNER JOIN acquisto as a ON s.matricola=a.matricola AND s.universita=a.universita
WHERE (a.importo>20)
GROUP BY b.codice_barre, s.nome, s.cognome;

/*4 Per ogni università visualizzare (per categorie) i libri venduti con un costo maggiore di 30 euro.*/
SELECT u.nome, l.genere, a.importo FROM universita AS u
INNER JOIN studente AS s ON u.nome = s.universita
INNER JOIN acquisto AS a ON u.nome = a.universita AND s.matricola=a.matricola
INNER JOIN libro AS l ON a.libro = l.titolo
WHERE a.importo>30
ORDER BY u.nome, l.genere;

/*5 Visualizzare i libri in ordine di punteggio medio crescente.*/
SELECT l.titolo, l.punteggio_medio FROM libro AS l
ORDER BY l.punteggio_medio ASC;

/*6 Per ogni università visualizzare i bibliotecari che ci hanno lavorato.*/
SELECT u.nome, b.nome, b.cognome FROM universita AS u
INNER JOIN biblioteca AS bib ON u.nome = bib.universita
INNER JOIN lavorato_a AS la ON la.biblioteca = bib.nome
INNER JOIN bibliotecario AS b on b.codice_fiscale = la.bibliotecario
ORDER BY u.nome;

/*7 Visualizzare la Casa editrice che fornisce più biblioteche.*/
SELECT ce.nome, COUNT(DISTINCT bib.nome) FROM casa_editrice AS ce
INNER JOIN fornisce_da AS fd ON ce.partita_iva = fd.casa_editrice
INNER JOIN fornitore AS f ON fd.p_iva_fornitore = f.partita_iva
INNER JOIN fornisce_a AS fa ON f.partita_iva = fa.p_iva_fornitore
INNER JOIN biblioteca AS bib ON fa.biblioteca = bib.nome
GROUP BY ce.nome
ORDER BY COUNT(DISTINCT bib.nome) DESC;

/*8 Visualizzare le Università in ordine di numero di libri contenuti nelle sue biblioteche.*/
SELECT u.nome, b.numero_libri_contenuti FROM universita AS u
INNER JOIN biblioteca AS b ON u.nome=b.universita
GROUP BY u.nome, b.numero_libri_contenuti
ORDER BY b.numero_libri_contenuti DESC;

/*9 Visualizzare i fondi medi di ogni università.*/
SELECT u.nome, AVG(fpub.importo + fpri.importo) FROM universita AS u
INNER JOIN fondo_pubblico AS fpub ON u.nome=fpub.universita
INNER JOIN fondo_privato AS fpri ON u.nome=fpri.universita
GROUP BY u.nome;

/*10 Per ogni biblioteca visualizzare quelle che contengono più di 20 libri.*/
SELECT b.nome, COUNT(c.libro) FROM biblioteca AS b
INNER JOIN scaffale AS s ON b.nome = s.biblioteca
INNER JOIN contiene AS c ON s.biblioteca = c.biblioteca AND s.codice=c.scaffale
GROUP BY b.nome
HAVING (COUNT(c.libro)>20);
